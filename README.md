# komu10 会計・事業管理システム v0.3

観光デザインDuoの会計・事業管理システム

## 技術スタック

- **フロントエンド**: Next.js 14 (App Router)
- **スタイリング**: Tailwind CSS
- **データベース**: Supabase (PostgreSQL)
- **ホスティング**: Vercel

## 機能

### ✅ 実装済み

1. **ダッシュボード**
   - KPIカード（売上・経費・利益）
   - 月別チャート（クリックで取引一覧にフィルター連動）
   - 部門別損益
   - 進行中プロジェクト

2. **取引管理**
   - 一覧表示（store/description別カラム）
   - 追加・編集・削除
   - フィルター（種別・月・部門・検索）

3. **プロジェクト管理**
   - カード/リスト表示切替
   - ソート（名前・日付・売上・利益）
   - フィルター（部門・ステータス・担当者）
   - **ROI・利益率の両方を%表示**（ツールチップで計算式）
   - 追加・編集・削除

4. **仕訳帳**
   - 説明テキスト追加
   - 月別集計
   - 借方/貸方バランス確認
   - CSV出力

5. **申告レポート**
   - 説明テキスト追加
   - 科目別コピーボタン
   - 按分適用後の金額表示

6. **固定資産台帳**
   - 減価償却計算（定額法）

7. **按分設定**
   - 科目別の事業使用割合設定

## セットアップ

```bash
# 依存関係インストール
npm install

# 環境変数設定
cp .env.local.example .env.local
# .env.local を編集してSupabaseの情報を入力

# 開発サーバー起動
npm run dev
```

## 環境変数

| 変数名 | 説明 |
|--------|------|
| `NEXT_PUBLIC_SUPABASE_URL` | Supabase プロジェクトURL |
| `NEXT_PUBLIC_SUPABASE_ANON_KEY` | Supabase 公開APIキー |
| `SUPABASE_SERVICE_ROLE_KEY` | Supabase 管理者キー（サーバーのみ） |

## デプロイ

Vercelにpushすると自動デプロイされます。

```bash
git add .
git commit -m "v0.3 全機能実装"
git push origin main
```

## ROI・利益率の計算式

- **ROI（投資対効果）** = (利益 ÷ 経費) × 100
- **利益率** = (利益 ÷ 売上) × 100

両方を%表記で表示し、ツールチップで計算式を説明します。
